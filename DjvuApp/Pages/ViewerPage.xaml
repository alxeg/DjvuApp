<Page
    x:Class="DjvuApp.ViewerPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:DjvuApp"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:i="using:Microsoft.Xaml.Interactivity"
    xmlns:common="using:DjvuApp.Common"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
    Loaded="ViewerPage_OnLoaded">

    <Grid>
        <Grid.Resources>
            <Style TargetType="ListView" x:Key="zoomedInViewStyle">
                <Setter Property="Foreground" Value="White" />
                <Setter Property="ScrollViewer.IsHorizontalScrollChainingEnabled" Value="False" />
                <Setter Property="IsItemClickEnabled" Value="False" />
                <Setter Property="IsSwipeEnabled" Value="True" />
                <Setter Property="SelectionMode" Value="None" />
                <Setter Property="IncrementalLoadingTrigger" Value="Edge"/>
                <Setter Property="DataFetchSize" Value="5"/>
            </Style>
            <ControlTemplate TargetType='ListView' x:Key='zoomedInViewControlTemplate'>
                <ScrollViewer x:Name='ScrollViewer'
                        TabNavigation='Local'
                        IsVerticalScrollChainingEnabled='False'
                        IsHorizontalScrollChainingEnabled='False'
                        HorizontalScrollMode='Enabled'
                        IsHorizontalRailEnabled='true'
                        HorizontalScrollBarVisibility='Auto'
                        HorizontalSnapPointsType='None'
                        VerticalScrollMode='Enabled'
                        IsVerticalRailEnabled='true'
                        VerticalScrollBarVisibility='Auto'
                        VerticalSnapPointsType='None'
                        ZoomMode='Enabled'
                        MinZoomFactor="0.1"
                        MaxZoomFactor="0.5">
                    <ItemsPresenter HorizontalAlignment="Center" VerticalAlignment="Center">
                        <!--<ItemsPresenter.Transitions>
                                            <TransitionCollection>
                                                <EntranceThemeTransition IsStaggeringEnabled="True" FromVerticalOffset="120" />
                                            </TransitionCollection>
                                        </ItemsPresenter.Transitions>-->
                    </ItemsPresenter>
                </ScrollViewer>
            </ControlTemplate>
            <DataTemplate x:Key="zoomedInViewItemTemplate">
                <Grid>
                    <Image Source="{Binding Source}" HorizontalAlignment="Center" Height="{Binding Height}" Width="{Binding Width}"></Image>
                </Grid>
            </DataTemplate>
            <ItemsPanelTemplate x:Key="zoomedInViewItemsPanelTemplate">
                <VirtualizingStackPanel Orientation="Vertical"/>
            </ItemsPanelTemplate>
        </Grid.Resources>
        <ListView
            x:Name="listView"
                            Style="{StaticResource zoomedInViewStyle}"
                            ItemTemplate="{StaticResource zoomedInViewItemTemplate}"
                            ItemsPanel="{StaticResource zoomedInViewItemsPanelTemplate}"
                            Template="{StaticResource zoomedInViewControlTemplate}"/>
    </Grid>
</Page>
